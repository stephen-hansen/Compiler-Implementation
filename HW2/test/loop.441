class LISTNODE [
   fields val, next, isnull
   method getNext() with locals:
      return &this.next
   method getVal() with locals:
      return &this.val
   method isNull() with locals:
      return &this.isnull
]
class STACK [
   fields list
   method push(v) with locals tmp:
      tmp = @LISTNODE
      !tmp.val = v
      !tmp.next = &this.list
      !tmp.isnull = 0
      !this.list = tmp
      return 0
   method pop() with locals tmp:
      if ^&this.list.isNull(): {
         return 0
      } else {
         tmp = ^&this.list.getVal()
         !this.list = ^&this.list.getNext()
         return tmp
      }
]
class STACKER [
   fields
   method do(stk) with locals x, v:
      x = 20
      while x: {
         _ = ^stk.push(x)
         x = (x - 1)
      }
      v = ^stk.pop()
      while v: {
         print(v)
         v = ^stk.pop()
      }
]
main with node, stk, stkr:
   stk = @STACK
   node = @LISTNODE
   !node.isnull = 1
   !stk.list = node
   stkr = @STACKER
   _ = ^stkr.do(stk)

