data:
global array vtblLISTNODE: { getNextLISTNODE, getValLISTNODE, isNullLISTNODE, 0, 0, 0 }
global array fieldsLISTNODE: { 2, 3, 4, 0 }
global array vtblSTACK: { 0, 0, 0, pushSTACK, popSTACK, 0 }
global array fieldsSTACK: { 0, 0, 0, 2 }
global array vtblSTACKER: { 0, 0, 0, 0, 0, doSTACKER }
global array fieldsSTACKER: { 0, 0, 0, 0 }
code:

getNextLISTNODE(this0):
  %1 = %this0 & 1
  if %1 then badpointer1 else l1
badpointer1:
  fail NotAPointer
l1:
  %2 = %this0 + 8
  %3 = load(%2)
  %4 = getelt(%3, 1)
  if %4 then l2 else badfield1
l2:
  %5 = getelt(%this0, %4)
  ret %5
badfield1:
  fail NoSuchField
getValLISTNODE(this0):
  %1 = %this0 & 1
  if %1 then badpointer2 else l3
badpointer2:
  fail NotAPointer
l3:
  %2 = %this0 + 8
  %3 = load(%2)
  %4 = getelt(%3, 0)
  if %4 then l4 else badfield2
l4:
  %5 = getelt(%this0, %4)
  ret %5
badfield2:
  fail NoSuchField
isNullLISTNODE(this0):
  %1 = %this0 & 1
  if %1 then badpointer3 else l5
badpointer3:
  fail NotAPointer
l5:
  %2 = %this0 + 8
  %3 = load(%2)
  %4 = getelt(%3, 2)
  if %4 then l6 else badfield3
l6:
  %5 = getelt(%this0, %4)
  ret %5
badfield3:
  fail NoSuchField

pushSTACK(this0, v0):
  %tmp1 = alloc(5)
  store(%tmp1, @vtblLISTNODE)
  %1 = %tmp1 + 8
  store(%1, @fieldsLISTNODE)
  setelt(%tmp1, 2, 1)
  setelt(%tmp1, 3, 1)
  setelt(%tmp1, 4, 1)
  %2 = %tmp1 & 1
  if %2 then badpointer4 else l7
badpointer4:
  fail NotAPointer
l7:
  %4 = load(%1)
  %5 = getelt(%4, 0)
  if %5 then l8 else badfield4
l8:
  setelt(%tmp1, %5, %v0)
  jump l9
l9:
  %8 = load(%1)
  %9 = getelt(%8, 1)
  if %9 then l10 else badfield5
l10:
  %10 = %this0 & 1
  if %10 then badpointer6 else l11
badpointer6:
  fail NotAPointer
l11:
  %11 = %this0 + 8
  %12 = load(%11)
  %13 = getelt(%12, 3)
  if %13 then l12 else badfield6
l12:
  %14 = getelt(%this0, %13)
  setelt(%tmp1, %9, %14)
  jump l13
l13:
  %17 = load(%1)
  %18 = getelt(%17, 2)
  if %18 then l14 else badfield7
l14:
  setelt(%tmp1, %18, 1)
  jump l15
l15:
  %21 = load(%11)
  %22 = getelt(%21, 3)
  if %22 then l16 else badfield8
l16:
  setelt(%this0, %22, %tmp1)
  ret 1
badfield8:
  fail NoSuchField
badfield7:
  fail NoSuchField
badfield6:
  fail NoSuchField
badfield5:
  fail NoSuchField
badfield4:
  fail NoSuchField
popSTACK(this0):
  %1 = %this0 & 1
  if %1 then badpointer9 else l17
badpointer9:
  fail NotAPointer
l17:
  %2 = %this0 + 8
  %3 = load(%2)
  %4 = getelt(%3, 3)
  if %4 then l18 else badfield9
l18:
  %5 = getelt(%this0, %4)
  %6 = %5 & 1
  if %6 then badpointer10 else l19
badpointer10:
  fail NotAPointer
l19:
  %7 = load(%5)
  %8 = getelt(%7, 2)
  if %8 then l20 else badmethod1
l20:
  %9 = call(%8, %5)
  %10 = %9 & 1
  if %10 then l21 else badnumber1
l21:
  %11 = %9 / 2
  if %11 then l22 else l23
l22:
  ret 1
l23:
  jump l24
l24:
  %14 = load(%2)
  %15 = getelt(%14, 3)
  if %15 then l25 else badfield10
l25:
  %16 = getelt(%this0, %15)
  %17 = %16 & 1
  if %17 then badpointer12 else l26
badpointer12:
  fail NotAPointer
l26:
  %18 = load(%16)
  %19 = getelt(%18, 1)
  if %19 then l27 else badmethod2
l27:
  %tmp1 = call(%19, %16)
  jump l28
l28:
  %22 = load(%2)
  %23 = getelt(%22, 3)
  if %23 then l29 else badfield11
l29:
  jump l30
l30:
  %26 = load(%2)
  %27 = getelt(%26, 3)
  if %27 then l31 else badfield12
l31:
  %28 = getelt(%this0, %27)
  %29 = %28 & 1
  if %29 then badpointer15 else l32
badpointer15:
  fail NotAPointer
l32:
  %30 = load(%28)
  %31 = getelt(%30, 0)
  if %31 then l33 else badmethod3
l33:
  %32 = call(%31, %28)
  setelt(%this0, %23, %32)
  ret %tmp1
badmethod3:
  fail NoSuchMethod
badfield12:
  fail NoSuchField
badfield11:
  fail NoSuchField
badmethod2:
  fail NoSuchMethod
badfield10:
  fail NoSuchField
badnumber1:
  fail NotANumber
badmethod1:
  fail NoSuchMethod
badfield9:
  fail NoSuchField

doSTACKER(this0, stk0):
  jump l35
l35:
  %x2 = phi(doSTACKER, 41, l41, %x3)
  %1 = %x2 & 1
  if %1 then l36 else badnumber2
l36:
  %2 = %x2 / 2
  if %2 then l37 else l38
l37:
  %3 = %stk0 & 1
  if %3 then badpointer16 else l39
badpointer16:
  fail NotAPointer
l39:
  %4 = load(%stk0)
  %5 = getelt(%4, 3)
  if %5 then l40 else badmethod4
l40:
  %6 = call(%5, %stk0, %x2)
  jump l41
l41:
  %8 = %x2 - 3
  %x3 = %8 + 1
  jump l35
badmethod4:
  fail NoSuchMethod
l38:
  %9 = %stk0 & 1
  if %9 then badpointer17 else l42
badpointer17:
  fail NotAPointer
l42:
  %10 = load(%stk0)
  %11 = getelt(%10, 4)
  if %11 then l43 else badmethod5
l43:
  %v1 = call(%11, %stk0)
  jump l44
l44:
  %v2 = phi(l43, %v1, l50, %v3)
  %12 = %v2 & 1
  if %12 then l45 else badnumber4
l45:
  %13 = %v2 / 2
  if %13 then l46 else l47
l46:
  jump l48
l48:
  print(%13)
  jump l49
l49:
  %17 = load(%stk0)
  %18 = getelt(%17, 4)
  if %18 then l50 else badmethod6
l50:
  %v3 = call(%18, %stk0)
  jump l44
badmethod6:
  fail NoSuchMethod
l47:
  ret 0
badnumber4:
  fail NotANumber
badmethod5:
  fail NoSuchMethod
badnumber2:
  fail NotANumber

main:
  %stk1 = alloc(3)
  store(%stk1, @vtblSTACK)
  %1 = %stk1 + 8
  store(%1, @fieldsSTACK)
  setelt(%stk1, 2, 1)
  %node1 = alloc(5)
  store(%node1, @vtblLISTNODE)
  %2 = %node1 + 8
  store(%2, @fieldsLISTNODE)
  setelt(%node1, 2, 1)
  setelt(%node1, 3, 1)
  setelt(%node1, 4, 1)
  %3 = %node1 & 1
  if %3 then badpointer19 else l51
badpointer19:
  fail NotAPointer
l51:
  %5 = load(%2)
  %6 = getelt(%5, 2)
  if %6 then l52 else badfield13
l52:
  setelt(%node1, %6, 3)
  %7 = %stk1 & 1
  if %7 then badpointer20 else l53
badpointer20:
  fail NotAPointer
l53:
  %9 = load(%1)
  %10 = getelt(%9, 3)
  if %10 then l54 else badfield14
l54:
  setelt(%stk1, %10, %node1)
  %stkr1 = alloc(2)
  store(%stkr1, @vtblSTACKER)
  %11 = %stkr1 + 8
  store(%11, @fieldsSTACKER)
  %12 = %stkr1 & 1
  if %12 then badpointer21 else l55
badpointer21:
  fail NotAPointer
l55:
  %13 = load(%stkr1)
  %14 = getelt(%13, 5)
  if %14 then l56 else badmethod7
l56:
  %15 = call(%14, %stkr1, %stk1)
  ret 0
badmethod7:
  fail NoSuchMethod
badfield14:
  fail NoSuchField
badfield13:
  fail NoSuchField

