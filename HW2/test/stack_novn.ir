data:
global array vtblLISTNODE: { getNextLISTNODE, getValLISTNODE, isNullLISTNODE, 0, 0 }
global array fieldsLISTNODE: { 2, 3, 4, 0 }
global array vtblSTACK: { 0, 0, 0, pushSTACK, popSTACK }
global array fieldsSTACK: { 0, 0, 0, 2 }
code:

getNextLISTNODE(this):
  %1 = %this & 1
  if %1 then badpointer1 else l1
badpointer1:
  fail NotAPointer
l1:
  %2 = %this + 8
  %3 = load(%2)
  %4 = getelt(%3, 1)
  if %4 then l2 else badfield1
l2:
  %5 = getelt(%this, %4)
  ret %5
badfield1:
  fail NoSuchField
getValLISTNODE(this):
  %1 = %this & 1
  if %1 then badpointer2 else l3
badpointer2:
  fail NotAPointer
l3:
  %2 = %this + 8
  %3 = load(%2)
  %4 = getelt(%3, 0)
  if %4 then l4 else badfield2
l4:
  %5 = getelt(%this, %4)
  ret %5
badfield2:
  fail NoSuchField
isNullLISTNODE(this):
  %1 = %this & 1
  if %1 then badpointer3 else l5
badpointer3:
  fail NotAPointer
l5:
  %2 = %this + 8
  %3 = load(%2)
  %4 = getelt(%3, 2)
  if %4 then l6 else badfield3
l6:
  %5 = getelt(%this, %4)
  ret %5
badfield3:
  fail NoSuchField

pushSTACK(this, v):
  %tmp = 1
  %tmp = alloc(5)
  store(%tmp, @vtblLISTNODE)
  %1 = %tmp + 8
  store(%1, @fieldsLISTNODE)
  setelt(%tmp, 2, 1)
  setelt(%tmp, 3, 1)
  setelt(%tmp, 4, 1)
  %2 = %tmp & 1
  if %2 then badpointer4 else l7
badpointer4:
  fail NotAPointer
l7:
  %3 = %tmp + 8
  %4 = load(%3)
  %5 = getelt(%4, 2)
  if %5 then l8 else badfield4
l8:
  setelt(%tmp, %5, 1)
  %6 = %tmp & 1
  if %6 then badpointer5 else l9
badpointer5:
  fail NotAPointer
l9:
  %7 = %tmp + 8
  %8 = load(%7)
  %9 = getelt(%8, 0)
  if %9 then l10 else badfield5
l10:
  setelt(%tmp, %9, %v)
  %10 = %tmp & 1
  if %10 then badpointer6 else l11
badpointer6:
  fail NotAPointer
l11:
  %11 = %tmp + 8
  %12 = load(%11)
  %13 = getelt(%12, 1)
  if %13 then l12 else badfield6
l12:
  %14 = %this & 1
  if %14 then badpointer7 else l13
badpointer7:
  fail NotAPointer
l13:
  %15 = %this + 8
  %16 = load(%15)
  %17 = getelt(%16, 3)
  if %17 then l14 else badfield7
l14:
  %18 = getelt(%this, %17)
  setelt(%tmp, %13, %18)
  %19 = %this & 1
  if %19 then badpointer8 else l15
badpointer8:
  fail NotAPointer
l15:
  %20 = %this + 8
  %21 = load(%20)
  %22 = getelt(%21, 3)
  if %22 then l16 else badfield8
l16:
  setelt(%this, %22, %tmp)
  ret 1
badfield8:
  fail NoSuchField
badfield7:
  fail NoSuchField
badfield6:
  fail NoSuchField
badfield5:
  fail NoSuchField
badfield4:
  fail NoSuchField
popSTACK(this):
  %tmp = 1
  %1 = %this & 1
  if %1 then badpointer9 else l17
badpointer9:
  fail NotAPointer
l17:
  %2 = %this + 8
  %3 = load(%2)
  %4 = getelt(%3, 3)
  if %4 then l18 else badfield9
l18:
  %5 = getelt(%this, %4)
  %6 = %5 & 1
  if %6 then badpointer10 else l19
badpointer10:
  fail NotAPointer
l19:
  %7 = load(%5)
  %8 = getelt(%7, 2)
  if %8 then l20 else badmethod1
l20:
  %9 = call(%8, %5)
  %10 = %9 & 1
  if %10 then l21 else badnumber1
l21:
  %11 = %9 / 2
  if %11 then l22 else l23
l22:
  ret 1
l23:
  %12 = %this & 1
  if %12 then badpointer11 else l24
badpointer11:
  fail NotAPointer
l24:
  %13 = %this + 8
  %14 = load(%13)
  %15 = getelt(%14, 3)
  if %15 then l25 else badfield10
l25:
  %16 = getelt(%this, %15)
  %17 = %16 & 1
  if %17 then badpointer12 else l26
badpointer12:
  fail NotAPointer
l26:
  %18 = load(%16)
  %19 = getelt(%18, 1)
  if %19 then l27 else badmethod2
l27:
  %tmp = call(%19, %16)
  %20 = %this & 1
  if %20 then badpointer13 else l28
badpointer13:
  fail NotAPointer
l28:
  %21 = %this + 8
  %22 = load(%21)
  %23 = getelt(%22, 3)
  if %23 then l29 else badfield11
l29:
  %24 = %this & 1
  if %24 then badpointer14 else l30
badpointer14:
  fail NotAPointer
l30:
  %25 = %this + 8
  %26 = load(%25)
  %27 = getelt(%26, 3)
  if %27 then l31 else badfield12
l31:
  %28 = getelt(%this, %27)
  %29 = %28 & 1
  if %29 then badpointer15 else l32
badpointer15:
  fail NotAPointer
l32:
  %30 = load(%28)
  %31 = getelt(%30, 0)
  if %31 then l33 else badmethod3
l33:
  %32 = call(%31, %28)
  setelt(%this, %23, %32)
  ret %tmp
badmethod3:
  fail NoSuchMethod
badfield12:
  fail NoSuchField
badfield11:
  fail NoSuchField
badmethod2:
  fail NoSuchMethod
badfield10:
  fail NoSuchField
badnumber1:
  fail NotANumber
badmethod1:
  fail NoSuchMethod
badfield9:
  fail NoSuchField

main:
  %stk = 1
  %node = 1
  %stk = alloc(3)
  store(%stk, @vtblSTACK)
  %1 = %stk + 8
  store(%1, @fieldsSTACK)
  setelt(%stk, 2, 1)
  %node = alloc(5)
  store(%node, @vtblLISTNODE)
  %2 = %node + 8
  store(%2, @fieldsLISTNODE)
  setelt(%node, 2, 1)
  setelt(%node, 3, 1)
  setelt(%node, 4, 1)
  %3 = %node & 1
  if %3 then badpointer16 else l35
badpointer16:
  fail NotAPointer
l35:
  %4 = %node + 8
  %5 = load(%4)
  %6 = getelt(%5, 2)
  if %6 then l36 else badfield13
l36:
  setelt(%node, %6, 3)
  %7 = %stk & 1
  if %7 then badpointer17 else l37
badpointer17:
  fail NotAPointer
l37:
  %8 = %stk + 8
  %9 = load(%8)
  %10 = getelt(%9, 3)
  if %10 then l38 else badfield14
l38:
  setelt(%stk, %10, %node)
  %11 = %stk & 1
  if %11 then badpointer18 else l39
badpointer18:
  fail NotAPointer
l39:
  %12 = load(%stk)
  %13 = getelt(%12, 3)
  if %13 then l40 else badmethod4
l40:
  %14 = call(%13, %stk, 3)
  %15 = %stk & 1
  if %15 then badpointer19 else l41
badpointer19:
  fail NotAPointer
l41:
  %16 = load(%stk)
  %17 = getelt(%16, 3)
  if %17 then l42 else badmethod5
l42:
  %18 = call(%17, %stk, 7)
  %19 = %stk & 1
  if %19 then badpointer20 else l43
badpointer20:
  fail NotAPointer
l43:
  %20 = load(%stk)
  %21 = getelt(%20, 3)
  if %21 then l44 else badmethod6
l44:
  %22 = call(%21, %stk, 11)
  %23 = %stk & 1
  if %23 then badpointer21 else l45
badpointer21:
  fail NotAPointer
l45:
  %24 = load(%stk)
  %25 = getelt(%24, 3)
  if %25 then l46 else badmethod7
l46:
  %26 = call(%25, %stk, 19)
  %27 = %stk & 1
  if %27 then badpointer22 else l47
badpointer22:
  fail NotAPointer
l47:
  %28 = load(%stk)
  %29 = getelt(%28, 4)
  if %29 then l48 else badmethod8
l48:
  %30 = call(%29, %stk)
  %31 = %30 & 1
  if %31 then l49 else badnumber2
l49:
  %32 = %30 / 2
  print(%32)
  %33 = %stk & 1
  if %33 then badpointer23 else l50
badpointer23:
  fail NotAPointer
l50:
  %34 = load(%stk)
  %35 = getelt(%34, 4)
  if %35 then l51 else badmethod9
l51:
  %36 = call(%35, %stk)
  %37 = %36 & 1
  if %37 then l52 else badnumber3
l52:
  %38 = %36 / 2
  print(%38)
  %39 = %stk & 1
  if %39 then badpointer24 else l53
badpointer24:
  fail NotAPointer
l53:
  %40 = load(%stk)
  %41 = getelt(%40, 4)
  if %41 then l54 else badmethod10
l54:
  %42 = call(%41, %stk)
  %43 = %42 & 1
  if %43 then l55 else badnumber4
l55:
  %44 = %42 / 2
  print(%44)
  %45 = %stk & 1
  if %45 then badpointer25 else l56
badpointer25:
  fail NotAPointer
l56:
  %46 = load(%stk)
  %47 = getelt(%46, 4)
  if %47 then l57 else badmethod11
l57:
  %48 = call(%47, %stk)
  %49 = %48 & 1
  if %49 then l58 else badnumber5
l58:
  %50 = %48 / 2
  print(%50)
  %51 = %stk & 1
  if %51 then badpointer26 else l59
badpointer26:
  fail NotAPointer
l59:
  %52 = load(%stk)
  %53 = getelt(%52, 4)
  if %53 then l60 else badmethod12
l60:
  %54 = call(%53, %stk)
  %55 = %54 & 1
  if %55 then l61 else badnumber6
l61:
  %56 = %54 / 2
  print(%56)
  ret 0
badnumber6:
  fail NotANumber
badmethod12:
  fail NoSuchMethod
badnumber5:
  fail NotANumber
badmethod11:
  fail NoSuchMethod
badnumber4:
  fail NotANumber
badmethod10:
  fail NoSuchMethod
badnumber3:
  fail NotANumber
badmethod9:
  fail NoSuchMethod
badnumber2:
  fail NotANumber
badmethod8:
  fail NoSuchMethod
badmethod7:
  fail NoSuchMethod
badmethod6:
  fail NoSuchMethod
badmethod5:
  fail NoSuchMethod
badmethod4:
  fail NoSuchMethod
badfield14:
  fail NoSuchField
badfield13:
  fail NoSuchField

